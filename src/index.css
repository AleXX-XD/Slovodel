@import "tailwindcss";

/* Ваши кастомные стили ниже */

/* Подключение локальных шрифтов */
@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik-Black.ttf') format('truetype');
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}

@layer base {
  body {
    @apply m-0 p-0;
    font-family: 'Rubik', sans-serif; /* Единый шрифт для всех устройств */
    -webkit-font-smoothing: antialiased; /* Убирает "размытость" шрифтов на iOS */
    -moz-osx-font-smoothing: grayscale;
  }
}

@keyframes pop {
  0% { transform: scale(0.95); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@layer utilities {
  /* Специальный класс для градиентного текста, работающий в Safari/iOS */
  .text-gradient-custom {
    @apply text-purple-700;

  }

  .dark .text-gradient-custom {
    @apply text-purple-300;

  }

  /* --- Глобальные компоненты интерфейса --- */

  /* Главный контейнер приложения */
  .app-wrapper {
    @apply h-full h-[100dvh] w-full max-w-md mx-auto flex flex-col relative overflow-hidden shadow-2xl transition-colors duration-300;
    @apply bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-indigo-200 via-purple-200 to-pink-200;
    @apply text-gray-700 selection:bg-pink-500/30;
    font-family: 'Rubik', sans-serif;
  }

  .dark .app-wrapper {
    @apply bg-slate-900 bg-none text-white;
  }

  /* Карточки статистики */
  .main_up {
    @apply text-gray-700;
  }

  .dark .main_up {
    @apply text-gray-50;
  }

  .player-card {
    @apply bg-white/60 backdrop-blur-md inline-flex flex-col justify-center items-center px-6 py-2 rounded-full shadow-lg border border-white/40 text-center;
  }
  .dark .player-card {
    @apply bg-white/10 border-white/10;
  }

  .stat-card {
    @apply bg-white/60 backdrop-blur-md p-3 rounded-2xl shadow-lg border border-white/40 text-center;
  }
  .dark .stat-card {
    @apply bg-white/10 border-white/10;
  }
  .stat-label {
    @apply text-[10px] opacity-60 font-bold text-indigo-800;
  }
  .dark .stat-label {
    @apply text-indigo-200;
  }
  .stat-value {
    @apply text-2xl font-bold text-gray-900 drop-shadow-md;
  }
  .dark .stat-value {
    @apply text-white;
  }

  .game_easy {
    @apply text-green-600 w-full py-4 bg-white/60 backdrop-blur-sm rounded-2xl shadow-lg border border-green-500/20 active:scale-[0.98] transition-all uppercase text-sm hover:bg-green-500/10;
  }
  
  .dark .game_easy {
    @apply bg-white/10 text-green-500 border-green-400/30 hover:bg-green-400/20;
  } 

    .game_medium {
    @apply text-blue-600 w-full py-4 bg-white/60 backdrop-blur-sm rounded-2xl shadow-lg border border-blue-500/20 active:scale-[0.98] transition-all uppercase text-sm hover:bg-blue-500/10;
  }
  
  .dark .game_medium {
    @apply bg-white/10 text-blue-500 border-blue-400/30 hover:bg-blue-400/20;
  } 

      .game_hard {
    @apply text-red-600 w-full py-4 bg-white/60 backdrop-blur-sm rounded-2xl shadow-lg border border-red-500/20 active:scale-[0.98] transition-all uppercase text-sm hover:bg-red-500/10;
  }
  
  .dark .game_hard {
    @apply bg-white/10 text-red-500 border-red-400/30 hover:bg-red-400/20;
  } 

  /* Кнопка с буквой (всегда светлая с черным текстом) */
  .letter-btn {
    @apply rounded-2xl font-bold text-4xl flex items-center justify-center transition-all active:scale-95 shadow-lg backdrop-blur-sm border-2 border-white/40;
    @apply bg-white/60 text-gray-700 hover:bg-white/80;
  }
  /* Активная/подсвеченная буква */
  .letter-btn-hint {
    @apply bg-amber-400 text-white shadow-[0_0_15px_rgba(245,158,11,0.5)] border-amber-400;
  }

  /* --- Модальные окна --- */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-md;
  }

  .dark .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md;
  }

  .animate-pop {
    animation: pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .modal-content {
    @apply bg-white/80 backdrop-blur-2xl rounded-3xl p-6 w-[95%] max-w-md text-center shadow-2xl border border-white/40;
    @apply text-gray-900;
    @apply max-h-[85vh] flex flex-col; /* Ограничение высоты и флекс для скролла */
    animation: pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
  
  .dark .modal-content {
    @apply bg-slate-900/85 text-white border-white/10;
  }

  .modal-title {
    @apply text-xl font-bold uppercase mb-4;
  }

  /* Строка настройки в меню */
  .settings-row {
    @apply flex items-center justify-between p-4 rounded-2xl border transition-all shadow-sm bg-white/60 backdrop-blur-md border-white/40;
  }
  .dark .settings-row {
    @apply bg-white/10 border-white/10;
  }

  /* Кнопки действий в настройках (стиль как на главной) */
  .btn-action-indigo {
    @apply w-full py-4 bg-indigo-500/10 text-indigo-600 font-bold rounded-2xl border border-indigo-500/20 active:scale-95 transition-all uppercase text-sm hover:bg-indigo-500/20 flex items-center justify-center gap-2;
  }
  .dark .btn-action-indigo {
    @apply bg-white/10 text-indigo-400 border-indigo-400/30 hover:bg-indigo-400/20;
  }

  .btn-action-red {
    @apply w-full py-4 bg-red-500/10 text-red-600 font-bold rounded-2xl border border-red-500/20 active:scale-95 transition-all uppercase text-sm hover:bg-red-500/20;
  }
  .dark .btn-action-red {
    @apply bg-white/10 text-red-400 border-red-400/30 hover:bg-red-400/20;
  }

  /* --- Стили для модального окна "Помощь" --- */
  .about-scroll-container {
    @apply overflow-y-auto pr-2 space-y-3 flex-1;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .about-scroll-container::-webkit-scrollbar {
    display: none;
  }

  .about-block {
    @apply bg-white/60 backdrop-blur-md p-4 rounded-2xl border border-white/40 shadow-sm text-left;
  }
  .dark .about-block {
    @apply bg-white/10 border-white/10;
  }

  .about-block-title {
    @apply font-bold text-indigo-600 uppercase text-xs mb-3 flex items-center gap-2;
  }
  .dark .about-block-title {
    @apply text-indigo-300;
  }

  .hint-item {
    @apply flex items-center gap-3 p-3 rounded-xl border transition-all shadow-sm mb-2;
    @apply bg-white/50 backdrop-blur-sm border-white/30;
  }
  .dark .hint-item {
    @apply bg-white/5 border-white/10;
  }

  .rank-item {
    @apply flex items-center justify-between gap-3 p-2 rounded-xl border transition-all shadow-sm mb-2;
    @apply bg-white/50 backdrop-blur-sm border-white/30;
  }
  .dark .rank-item {
    @apply bg-white/5 border-white/10;
  }

  .bonus-count-badge {
    @apply flex flex-col items-center bg-white/60 rounded-lg px-2 min-w-[32px];
  }

  .dark .bonus-count-badge {
    @apply bg-transparent;
  }

  /* Утилиты для выравнивания текста в списках */
  .item-title {
    @apply font-bold text-left truncate flex-1 text-sm text-gray-800;
  }
  .dark .item-title {
    @apply text-gray-100;
  }
  .item-value {
    @apply font-bold whitespace-nowrap text-sm text-indigo-600;
  }
  .dark .item-value {
    @apply text-indigo-300;
  }

  .feedback-input {
    @apply w-full bg-white/50 border border-white/20 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500 transition-colors text-gray-900 placeholder:text-gray-500;
  }
  .dark .feedback-input {
    @apply bg-black/20 text-white;
  }

  /* Стили для настроек */
  .modal-icon {
    @apply text-gray-800;
  }
  .dark .modal-icon {
    @apply text-white;
  }

  .modal-header-icon {
    @apply text-indigo-600;
  }

  .dark .modal-header-icon {
    @apply text-indigo-400;
  }

  .modal-close-btn {
    @apply p-2 bg-white/70 rounded-xl hover:bg-black/10 transition-colors;
  }
  .dark .modal-close-btn {
    @apply bg-white/10 hover:bg-white/20;
  }

  .toggle-btn-inactive {
    @apply bg-gray-300;
  }
  .dark .toggle-btn-inactive {
    @apply bg-gray-600;
  }

  .settings-footer {
    @apply mt-6 text-center opacity-30 text-[10px] font-bold uppercase tracking-widest text-gray-500;
  }
  .dark .settings-footer {
    @apply text-gray-400;
  }

  /* Цвета иконок и заголовков бонусов */
  .text-icon-indigo { @apply text-indigo-500; }
  .dark .text-icon-indigo { @apply text-indigo-400; }

  .text-icon-amber { @apply text-amber-500; }
  .dark .text-icon-amber { @apply text-amber-400; }

  .text-icon-purple { @apply text-purple-500; }
  .dark .text-icon-purple { @apply text-purple-400; }

  .text-icon-pink { @apply text-pink-500; }
  .dark .text-icon-pink { @apply text-pink-400; }

  .text-title-indigo { @apply text-indigo-600; }
  .dark .text-title-indigo { @apply text-indigo-300; }

  .text-title-amber { @apply text-amber-600; }
  .dark .text-title-amber { @apply text-amber-300; }

  .text-title-purple { @apply text-purple-600; }
  .dark .text-title-purple { @apply text-purple-300; }

  .text-title-pink { @apply text-pink-600; }
  .dark .text-title-pink { @apply text-pink-300; }

  .rank-title { @apply font-bold text-indigo-600 text-sm truncate; }
  .dark .rank-title { @apply text-indigo-300; }

  .feedback-send-btn {
    @apply p-2 rounded-xl transition-colors active:scale-95 flex items-center justify-center;
  }
  .feedback-send-btn-active {
    @apply bg-indigo-600 text-white hover:bg-indigo-700;
  }
  .feedback-send-btn-disabled {
    @apply bg-gray-300 text-gray-500 cursor-not-allowed;
  }
  .dark .feedback-send-btn-disabled {
    @apply bg-gray-700 text-gray-400;
  }

  /* Стили для коллекции */
  .collection-item {
    @apply flex justify-between items-center p-3 rounded-xl border transition-all shadow-sm mb-2;
    @apply bg-white/50 backdrop-blur-sm border-white/30;
  }
  .dark .collection-item {
    @apply bg-white/5 border-white/10;
  }

  .collection-word {
    @apply text-lg font-bold uppercase tracking-wider leading-none text-indigo-600;
  }
  .dark .collection-word {
    @apply text-indigo-300;
  }

  .collection-meta {
    @apply text-[10px] font-bold opacity-50 uppercase mt-1 text-gray-600;
  }
  .dark .collection-meta {
    @apply text-gray-400;
  }

  .collection-score {
    @apply bg-indigo-100 px-3 py-1 rounded-full text-sm font-bold text-indigo-600;
  }
  .dark .collection-score {
    @apply bg-indigo-500/20 text-indigo-300;
  }

  .empty-state-text { @apply font-bold italic text-sm text-gray-500; }
  .dark .empty-state-text { @apply text-gray-400; }

  /* Стили для профиля */
  .profile-avatar {
    @apply w-24 h-24 rounded-full border-4 border-white/20 shadow-xl;
  }
  
  .profile-rank-badge {
    @apply absolute -bottom-2 -right-2 bg-white p-2 rounded-full shadow-lg border border-white/10;
  }
  .dark .profile-rank-badge {
    @apply bg-slate-800;
  }

  .profile-name { @apply text-xl font-bold text-gray-900; }
  .dark .profile-name { @apply text-white; }

  .profile-rank { @apply text-sm font-bold text-indigo-500 uppercase tracking-widest; }
  .dark .profile-rank { @apply text-indigo-300; }

  .profile-block {
    @apply bg-white/60 backdrop-blur-md p-4 rounded-2xl border border-white/40 shadow-sm;
  }
  .dark .profile-block {
    @apply bg-white/10 border-white/10;
  }

  .level-progress-bg {
    @apply h-4 w-full bg-gray-200 rounded-full overflow-hidden shadow-inner;
  }
  .dark .level-progress-bg {
    @apply bg-black/30;
  }

  .bonus-card {
    @apply bg-white/60 backdrop-blur-sm p-2 rounded-xl flex flex-col items-center justify-center border border-white/40 shadow-sm;
  }
  .dark .bonus-card {
    @apply bg-white/10 border-white/10;
  }

  .stat-box {
    @apply p-2 bg-white/60 backdrop-blur-sm rounded-2xl border border-white/40 flex flex-col items-center text-center shadow-sm;
  }
  .dark .stat-box {
    @apply bg-white/10 border-white/10;
  }

  .profile-label { @apply text-xs font-bold uppercase mb-2 opacity-70 text-gray-800; }
  .dark .profile-label { @apply text-white; }
  
  .stat-value-text { @apply text-lg font-bold text-gray-800; }
  .dark .stat-value-text { @apply text-white; }

  .stat-label-text { @apply text-[10px] uppercase font-bold opacity-50 text-gray-600; }
  .dark .stat-label-text { @apply text-gray-300; }

  /* Стили для окна награды (RewardModal) */
  .reward-modal-content {
    @apply bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl p-8 text-center shadow-2xl border border-white/20 relative overflow-hidden;
    animation: pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
  /* Примечание: dark:bg-slate-900 здесь работает, так как это не внутри @apply с другими классами, но для единообразия можно разделить */
  .dark .reward-modal-content {
    @apply bg-slate-900;
  }

  .reward-gradient-bar {
    @apply absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500;
  }

  .reward-icon {
    @apply mx-auto mb-4 text-amber-500 animate-bounce;
  }

  .reward-title {
    @apply text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-600 uppercase tracking-tight mb-2;
  }

  .reward-subtitle {
    @apply text-sm text-gray-500 mb-6;
  }
  .dark .reward-subtitle {
    @apply text-gray-400;
  }

  .reward-box {
    @apply py-6 px-6 bg-indigo-50 rounded-2xl mb-8 border border-indigo-100 flex flex-col items-center gap-2;
  }
  .dark .reward-box {
    @apply bg-indigo-900/30 border-indigo-500/30;
  }

  /* --- Компоненты Табов (для Leaderboard и Admin) --- */
  .tabs-group {
    @apply flex p-1 bg-gray-200/50 rounded-xl;
  }
  .dark .tabs-group {
    @apply bg-black/20;
  }

  .tab-item {
    @apply flex-1 py-2 rounded-lg text-xs font-bold uppercase transition-all flex items-center justify-center gap-2 cursor-pointer;
    @apply text-gray-500;
  }
  .dark .tab-item {
    @apply text-gray-400;
  }

  .tab-item-active {
    @apply bg-white shadow-sm text-indigo-600;
  }
  .dark .tab-item-active {
    @apply bg-white/10 text-white;
  }

  /* --- Компоненты Лидерборда --- */
  .leaderboard-scroll {
    @apply overflow-y-auto pr-1 space-y-2 flex-1 my-2;
    scrollbar-width: none;
  }
  .leaderboard-scroll::-webkit-scrollbar {
    display: none;
  }

  .leaderboard-card {
    @apply flex items-center gap-3 p-3 rounded-xl border transition-all shadow-sm;
    @apply bg-white/50 backdrop-blur-sm border-white/30;
  }
  .dark .leaderboard-card {
    @apply bg-white/5 border-white/10;
  }

  .leaderboard-card-active {
    @apply bg-indigo-100 border-indigo-200;
  }
  .dark .leaderboard-card-active {
    @apply bg-indigo-500/30 border-indigo-400/50;
  }

  .leaderboard-name {
    @apply font-bold truncate text-gray-800;
  }
  .dark .leaderboard-name {
    @apply text-white;
  }
  
  .leaderboard-name-active {
    @apply text-indigo-600;
  }
  .dark .leaderboard-name-active {
    @apply text-indigo-200;
  }

  .leaderboard-subtext {
    @apply text-[10px] font-bold opacity-50 uppercase text-gray-600;
  }
  .dark .leaderboard-subtext {
    @apply text-white/70;
  }

  .leaderboard-points {
    @apply font-bold text-amber-600 w-20 text-right shrink-0;
  }
  .dark .leaderboard-points {
    @apply text-amber-300;
  }

  .reward-box-label {
    @apply text-xs font-bold uppercase text-indigo-500;
  }
  .dark .reward-box-label {
    @apply text-indigo-300;
  }

  .reward-box-value {
    @apply text-xl font-bold text-gray-800;
  }
  .dark .reward-box-value {
    @apply text-white;
  }

  .reward-button {
    @apply w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-2xl shadow-lg active:scale-95 transition-all uppercase tracking-wider;
  }

  /* --- Игровой экран --- */
  .game-header-btn {
    @apply p-3 bg-white/60 dark:bg-white/10 backdrop-blur-md rounded-xl border border-white/40 dark:border-white/10 active:scale-95 shadow-lg transition-all text-gray-700 dark:text-gray-50;
  }
  
  .game-panel {
    @apply mt-auto w-full bg-white/60 dark:bg-white/10 backdrop-blur-xl p-4 rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] dark:shadow-[0_-10px_40px_rgba(0,0,0,0.3)] z-30 border-t border-white/40 dark:border-white/10 shrink-0;
  }

  /* Логотип-маска для SVG */
  .logo-svg {
    @apply w-full max-w-[400px] h-20;
    mask-image: url('/image/slovodel_black.svg');
    mask-repeat: no-repeat;
    mask-position: center;
    mask-size: contain;
    -webkit-mask-image: url('/image/slovodel_black.svg');
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-position: center;
    -webkit-mask-size: contain;
    background-color: currentColor;
  }

  /* --- Стили GameScreen --- */

  .swap-modal-title {
    @apply text-xl font-bold uppercase mb-4 text-indigo-600;
  }
  .dark .swap-modal-title {
    @apply text-indigo-400;
  }

  .swap-modal-text {
    @apply text-xs opacity-60 mt-2 text-gray-600;
  }
  .dark .swap-modal-text {
    @apply text-white;
  }

  .swap-modal-input {
    @apply w-20 h-20 text-4xl text-center rounded-2xl my-6 uppercase outline-none bg-gray-100 text-gray-900 font-black border border-gray-200 shadow-inner;
  }
  .dark .swap-modal-input {
    @apply bg-black/20 text-white border-white/10;
  }

  .swap-modal-cancel-btn {
    @apply w-full py-3 bg-gray-200 rounded-xl font-bold text-gray-500;
  }
  .dark .swap-modal-cancel-btn {
    @apply bg-gray-800;
  }

  .game-score {
    @apply font-bold text-indigo-600 text-2xl drop-shadow-md;
  }
  .dark .game-score {
    @apply text-white;
  }

  .timer-base {
    @apply text-2xl font-mono font-bold;
  }
  .timer-warning {
    @apply text-red-500 animate-pulse;
  }
  .dark .timer-warning {
    @apply text-red-400;
  }
  .timer-normal {
    @apply text-gray-700;
  }
  .dark .timer-normal {
    @apply text-gray-50;
  }

  .hint-box {
    @apply bg-amber-500/10 backdrop-blur-md p-4 rounded-2xl shadow-lg border border-amber-500/20;
    animation: pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
  .dark .hint-box {
    @apply bg-amber-500/20 border-amber-500/30;
  }

  .hint-label {
    @apply text-[10px] font-bold text-amber-600 uppercase tracking-widest mb-1;
  }
  .dark .hint-label {
    @apply text-amber-300;
  }

  .hint-text {
    @apply text-sm font-bold italic text-gray-800 leading-relaxed;
  }
  .dark .hint-text {
    @apply text-white;
  }

  .hint-word {
    @apply text-3xl font-bold text-center text-indigo-600 uppercase animate-bounce drop-shadow-md my-2;
  }
  .dark .hint-word {
    @apply text-white;
  }

  .found-word-item {
    @apply bg-white/60 backdrop-blur-sm px-3 py-1.5 rounded-lg font-bold text-sm text-indigo-700 shadow-sm border border-white/40 flex items-center gap-2;
    animation: pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }
  .dark .found-word-item {
    @apply bg-white/10 text-white border-white/10;
  }

  .found-word-score {
    @apply bg-green-100 text-green-600 text-[10px] px-1.5 rounded-md font-bold;
  }
  .dark .found-word-score {
    @apply bg-green-900/30 text-green-400;
  }

  .bonus-btn-container {
    @apply w-14 h-14 bg-gradient-to-b from-white to-gray-200 rounded-2xl flex items-center justify-center border-2 border-white/50 shadow-xl;
  }
  .dark .bonus-btn-container {
    @apply from-gray-700 to-gray-800;
  }

  .bonus-badge-normal {
    @apply bg-black/20 text-gray-800;
  }
  .dark .bonus-badge-normal {
    @apply bg-white/10 text-white;
  }

  .input-field-container {
    @apply h-16 mb-4 bg-gray-100/50 rounded-2xl flex items-center justify-center relative px-12 shadow-inner border border-gray-200;
  }
  .dark .input-field-container {
    @apply bg-black/20 border-white/5;
  }

  .input-text {
    @apply text-3xl font-bold text-indigo-600 uppercase overflow-hidden whitespace-nowrap drop-shadow-md w-full;
  }
  .dark .input-text {
    @apply text-white;
  }

  .input-placeholder {
    @apply opacity-30 text-lg font-normal normal-case italic text-gray-400;
  }
  .dark .input-placeholder {
    @apply text-white/20;
  }

  .btn-enter-disabled {
    @apply bg-gray-300 text-gray-500 cursor-not-allowed;
  }
  .dark .btn-enter-disabled {
    @apply bg-gray-700;
  }

  .confirm-modal-cancel {
    @apply flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-bold;
  }
  .dark .confirm-modal-cancel {
    @apply bg-gray-800 text-gray-300;
  }
}